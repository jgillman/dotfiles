# Check for Homebrew,
# Install if we don't have it
if ! hash brew 2>/dev/null; then
  echo "Installing homebrew..."
  ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

# Update homebrew recipes
brew update

# Make sure git is installed
brew install git

brew install coreutils
brew install findutils
brew install bash
brew install zsh

# Allow more recent versions of build in tools
brew tap homebrew/dupes
brew install homebrew/dupes/grep

# Install these
binaries=(
  cheat
  ffmpeg
  fzf
  graphicsmagick
  heroku-toolbelt
  hub
  imagemagick
  macvim
  mobile-shell
  mtr
  namebench
  ngrok
  node
  rbenv
  reattach-to-user-namespace
  rename
  ruby-build
  s3cmd
  ssh-copy-id
  the_silver_searcher
  tig
  tmux
  watch
  webkit2png
  wget
  youtube-dl
)

echo "Installing binaries..."
brew install ${binaries[@]}

echo "Cleaning up..."
brew cleanup



# Add brew cask
brew tap phinze/homebrew-cask

apps=(
  adium
  alfred
  appclearner
  atext
  bartender
  caffeine
  cathode
  charles
  crashplan
  dash
  disk-inventory-x
  divvy
  dropbox
  evernote
  firefox
  flux
  google-chrome
  gpgtools
  imagealpha
  imageoptim
  istat-menus
  iterm2
  karabiner
  keyboard-cleaner
  launchcontrol
  macpaw-gemini
  mediainfo
  monodraw
  netspot
  onepassword
  plex-home-theater
  qlmarkdown
  qlstephen
  quicklook-json
  rdio
  screenhero
  slack
  steam
  the-unarchiver
  transmit
  tripmode
  tunnelblick
  vagrant
  virtualbox
  vitamin-r
  vlc
  xld
)

# Install apps to /Applications
echo "Install apps..."
brew cask install --appdir="/Applications" ${apps[@]}

# Link alfred
brew cask alfred list

echo "Cleaning up..."
brew cleanup
