# Check for Homebrew,
# Install if we don't have it
if ! hash brew 2>/dev/null; then
  echo "Installing homebrew..."
  ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

# Update homebrew recipes
brew update

# Make sure git is installed
brew install git

brew install coreutils
brew install findutils
brew install zsh

# Install these
binaries=(
  ffmpeg
  gh
  libyaml
  mise
  postgresql@16
  redis
  s3cmd
)

echo "Installing binaries..."
brew install ${binaries[@]}

echo "Cleaning up..."
brew cleanup

apps=(
  google-chrome
  gpgtools
  imagealpha
  imagemagick
  xld
)

brew services start redis

# from https://devcenter.heroku.com/articles/heroku-cli
brew install heroku/brew/heroku

# Install apps to /Applications
echo "Install apps..."
brew install --cask ${apps[@]}

echo "Cleaning up..."
brew cleanup

# start immmediately and configure to start on bootup
brew services start postgresql@16
brew services start redis

